<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>å®‡å®™ã®è·é›¢ã‚’ãŠé‡‘ã§å®Ÿæ„Ÿã™ã‚‹</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+JP:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Noto Sans JP', sans-serif;
			background: linear-gradient(135deg, #0a1628 0%, #1a2744 50%, #0a1628 100%);
			color: #ffffff;
			min-height: 100vh;
			padding: 20px;
		}

		.container {
			max-width: 1400px;
			margin: 0 auto;
		}

		/* ãƒ˜ãƒƒãƒ€ãƒ¼ */
		header {
			text-align: center;
			padding: 40px 20px;
			margin-bottom: 30px;
		}

		h1 {
			font-family: 'Orbitron', sans-serif;
			font-size: 2.5rem;
			background: linear-gradient(45deg, #ffd700, #ffed4e);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			margin-bottom: 10px;
			text-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
		}

		.subtitle {
			color: #8899bb;
			font-size: 1.1rem;
		}

		/* ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
		.mode-section {
			background: rgba(255, 255, 255, 0.05);
			border: 2px solid rgba(255, 215, 0, 0.3);
			border-radius: 20px;
			padding: 30px;
			margin-bottom: 30px;
			backdrop-filter: blur(10px);
		}

		.mode-buttons {
			display: flex;
			gap: 20px;
			justify-content: center;
			margin-bottom: 20px;
			flex-wrap: wrap;
		}

		.mode-btn {
			font-family: 'Orbitron', sans-serif;
			font-size: 1.2rem;
			padding: 20px 40px;
			border: 3px solid #ffd700;
			background: rgba(255, 215, 0, 0.1);
			color: #ffd700;
			border-radius: 15px;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			gap: 10px;
		}

		.mode-btn:hover {
			background: rgba(255, 215, 0, 0.2);
			transform: translateY(-3px);
			box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
		}

		.mode-btn.active {
			background: linear-gradient(135deg, #ffd700, #ffed4e);
			color: #0a1628;
			font-weight: bold;
			box-shadow: 0 10px 40px rgba(255, 215, 0, 0.5);
		}

		.current-rate {
			text-align: center;
			color: #8899bb;
			font-size: 1.1rem;
			margin-bottom: 20px;
		}

		.current-rate strong {
			color: #ffd700;
			font-family: 'Roboto Mono', monospace;
		}

		/* ã‚³ãƒ¼ãƒ’ãƒ¼ãƒ¬ãƒ¼ãƒˆè¨­å®š */
		.coffee-rate-setting {
			background: rgba(255, 215, 0, 0.1);
			border: 2px solid rgba(255, 215, 0, 0.3);
			border-radius: 15px;
			padding: 20px;
			margin-top: 20px;
			text-align: center;
		}

		.coffee-rate-setting label {
			color: #ffd700;
			font-size: 1.1rem;
			display: block;
			margin-bottom: 15px;
		}

		.coffee-rate-input-group {
			display: flex;
			gap: 10px;
			justify-content: center;
			align-items: center;
			flex-wrap: wrap;
		}

		.coffee-rate-input-group input {
			padding: 12px 20px;
			font-size: 1.2rem;
			border: 2px solid #ffd700;
			background: rgba(255, 255, 255, 0.1);
			color: #fff;
			border-radius: 10px;
			width: 150px;
			font-family: 'Roboto Mono', monospace;
		}

		.coffee-rate-input-group button {
			padding: 12px 30px;
			font-size: 1.1rem;
			border: 2px solid #ffd700;
			background: rgba(255, 215, 0, 0.2);
			color: #ffd700;
			border-radius: 10px;
			cursor: pointer;
			transition: all 0.3s ease;
			font-weight: bold;
		}

		.coffee-rate-input-group button:hover {
			background: linear-gradient(135deg, #ffd700, #ffed4e);
			color: #0a1628;
			transform: scale(1.05);
		}

		/* ã‚°ãƒ©ãƒ•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
		.chart-section {
			background: rgba(255, 255, 255, 0.05);
			border-radius: 20px;
			padding: 30px;
			margin-bottom: 40px;
		}

		.chart-section h2 {
			font-family: 'Orbitron', sans-serif;
			color: #ffd700;
			margin-bottom: 20px;
			text-align: center;
		}

		#distanceChart {
			max-height: 600px;
		}

		/* ã‚«ã‚¹ã‚¿ãƒ è¨ˆç®—æ©Ÿ */
		.calculator-section {
			background: rgba(255, 255, 255, 0.05);
			border-radius: 20px;
			padding: 30px;
			margin-bottom: 40px;
		}

		.calculator-section h2 {
			font-family: 'Orbitron', sans-serif;
			color: #ffd700;
			margin-bottom: 20px;
			text-align: center;
		}

		.calculator-input {
			display: flex;
			gap: 15px;
			justify-content: center;
			align-items: center;
			margin-bottom: 20px;
			flex-wrap: wrap;
		}

		.calculator-input input {
			padding: 15px;
			font-size: 1.2rem;
			border: 2px solid #4a90e2;
			background: rgba(74, 144, 226, 0.1);
			color: #fff;
			border-radius: 10px;
			width: 250px;
			font-family: 'Roboto Mono', monospace;
		}

		.calculator-input input::placeholder {
			color: rgba(255, 255, 255, 0.5);
		}

		.calculator-result {
			background: rgba(255, 215, 0, 0.1);
			border: 2px solid rgba(255, 215, 0, 0.3);
			border-radius: 15px;
			padding: 30px;
			text-align: center;
		}

		.calculator-result .amount {
			font-family: 'Roboto Mono', monospace;
			font-size: 2.5rem;
			color: #ffd700;
			margin-bottom: 15px;
		}

		.calculator-result .comparison-text {
			color: #8899bb;
			font-size: 1.1rem;
		}

		/* è©³ç´°ãƒ†ãƒ¼ãƒ–ãƒ« */
		.table-section {
			background: rgba(255, 255, 255, 0.05);
			border-radius: 20px;
			padding: 30px;
			margin-bottom: 40px;
			overflow-x: auto;
		}

		.table-section h2 {
			font-family: 'Orbitron', sans-serif;
			color: #ffd700;
			margin-bottom: 20px;
			text-align: center;
		}

		table {
			width: 100%;
			border-collapse: collapse;
			font-family: 'Roboto Mono', monospace;
		}

		th {
			background: rgba(255, 215, 0, 0.2);
			color: #ffd700;
			padding: 15px;
			text-align: left;
			border-bottom: 2px solid #ffd700;
			cursor: pointer;
			user-select: none;
		}

		th:hover {
			background: rgba(255, 215, 0, 0.3);
		}

		td {
			padding: 15px;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		}

		tr:hover {
			background: rgba(255, 255, 255, 0.05);
		}

		.category-badge {
			display: inline-block;
			padding: 5px 12px;
			border-radius: 15px;
			font-size: 0.85rem;
			font-weight: bold;
		}

		.category-earth {
			background: #4a90e2;
		}

		.category-solar {
			background: #f39c12;
		}

		.category-star {
			background: #9b59b6;
		}

		.category-galaxy {
			background: #e91e63;
		}

		.category-beyond {
			background: #673ab7;
		}

		/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
		@media (max-width: 768px) {
			h1 {
				font-size: 1.8rem;
			}

			.mode-btn {
				font-size: 1rem;
				padding: 15px 25px;
			}

			.highlight-cards {
				grid-template-columns: 1fr;
			}

			.comparison-selectors {
				flex-direction: column;
			}

			.calculator-input {
				flex-direction: column;
			}

			table {
				font-size: 0.85rem;
			}
		}

		/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
		@keyframes countUp {
			from {
				opacity: 0;
				transform: translateY(20px);
			}

			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		.animate-count {
			animation: countUp 0.5s ease-out;
		}

		/* ãƒ•ãƒƒã‚¿ãƒ¼ */
		footer {
			text-align: center;
			padding: 40px 20px;
			color: #8899bb;
			font-size: 0.9rem;
		}
	</style>
</head>

<body>
	<div class="container">
		<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
		<header>
			<h1>ğŸŒŒ å®‡å®™ã®è·é›¢ã‚’ãŠé‡‘ã§å®Ÿæ„Ÿã™ã‚‹ ğŸ’°</h1>
			<p class="subtitle">åœ°çƒä¸€å‘¨ã‹ã‚‰è¦³æ¸¬å¯èƒ½ãªå®‡å®™ã¾ã§ã€è·é›¢ã‚’é‡‘é¡ã«æ›ç®—ã—ã¦æ¯”è¼ƒ</p>
		</header>

		<!-- ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
		<section class="mode-section">
			<div class="mode-buttons">
				<button class="mode-btn active" data-mode="km" onclick="switchMode('km')">
					<i class="fas fa-globe"></i> kmãƒ¢ãƒ¼ãƒ‰
				</button>
				<button class="mode-btn" data-mode="lightyear" onclick="switchMode('lightyear')">
					<i class="fas fa-star"></i> å…‰å¹´ãƒ¢ãƒ¼ãƒ‰
				</button>
			</div>
			<p class="current-rate">ç¾åœ¨ã®æ›ç®—ãƒ¬ãƒ¼ãƒˆ: <strong id="currentRateText">1km = 1å††</strong></p>
		</section>

		<!-- ã‚°ãƒ©ãƒ•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
		<section class="chart-section">
			<h2>ğŸ“Š å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«æ¯”è¼ƒã‚°ãƒ©ãƒ•</h2>
			<canvas id="distanceChart"></canvas>
		</section>

		<!-- è©³ç´°ãƒ†ãƒ¼ãƒ–ãƒ« -->
		<section class="table-section">
			<h2>ğŸ“‹ å…¨ãƒ‡ãƒ¼ã‚¿ä¸€è¦§</h2>
			<table id="dataTable">
				<thead>
					<tr>
						<th onclick="sortTable(0)">ã‚«ãƒ†ã‚´ãƒª</th>
						<th onclick="sortTable(1)">åç§°</th>
						<th onclick="sortTable(2)">è·é›¢</th>
						<th onclick="sortTable(3)">é‡‘é¡</th>
						<th onclick="sortTable(4)">ãƒ¢ãƒã®æ•°</th>
						<th onclick="sortTable(5)">å…‰é€Ÿã§ã®æ‰€è¦æ™‚é–“</th>
						<th onclick="sortTable(6)">äººç”Ÿã‚¤ãƒ™ãƒ³ãƒˆæ›ç®—</th>
					</tr>
				</thead>
				<tbody id="tableBody">
					<!-- JavaScriptã§å‹•çš„ç”Ÿæˆ -->
				</tbody>
			</table>
		</section>

		<!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
		<footer>
			<p>ğŸŒŸ ãƒ‡ãƒ¼ã‚¿å‡ºå…¸: NASA, å›½ç«‹å¤©æ–‡å°, Wikipedia</p>
			<p>Â© 2025 å®‡å®™è·é›¢é‡‘é¡æ›ç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</p>
		</footer>
	</div>

	<script>
		// å®šæ•°
		const LIGHT_YEAR_IN_KM = 9.461e12;

		// æ¯”è¼ƒåŸºæº–ã®å˜ä¾¡
		const PRICE_REFERENCES = {
			canJuice: 150,           // ç¼¶ã‚¸ãƒ¥ãƒ¼ã‚¹
			iphone: 150000,          // æœ€æ–°iPhone Pro
			keyCar: 1500000,         // è»½è‡ªå‹•è»Š
			luxuryMansion: 500000000, // éƒ½å¿ƒã®é«˜ç´šãƒãƒ³ã‚·ãƒ§ãƒ³
			tokyoSkytree: 65000000000, // æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼å»ºè¨­è²»
			japanBudget: 110000000000000 // æ—¥æœ¬ã®å¹´é–“å›½å®¶äºˆç®—
		};

		// ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
		const spaceDistances = [
			{
				id: 1,
				name: "æ±äº¬-å¤§é˜ª",
				category: "åœ°çƒå‘¨è¾º",
				distanceKm: 500,
				distanceLightYears: 500 / LIGHT_YEAR_IN_KM,
				description: "æ–°å¹¹ç·šã§ç´„2æ™‚é–“åŠ",
				icon: "ğŸš…",
				timeLightSpeed: "0.0017ç§’",
				lifeEventComparison: "ç¬ã ç´„0.5å›åˆ†",
				categoryClass: "category-earth"
			},
			{
				id: 2,
				name: "åœ°çƒä¸€å‘¨",
				category: "åœ°çƒå‘¨è¾º",
				distanceKm: 40075,
				distanceLightYears: 40075 / LIGHT_YEAR_IN_KM,
				description: "èµ¤é“ä¸Šã®è·é›¢",
				icon: "ğŸŒ",
				timeLightSpeed: "0.13ç§’",
				lifeEventComparison: "æŒ‡ãƒ‘ãƒƒãƒãƒ³ ç´„1å›åˆ†",
				categoryClass: "category-earth"
			},
			{
				id: 3,
				name: "åœ°çƒ-æœˆ",
				category: "åœ°çƒå‘¨è¾º",
				distanceKm: 384400,
				distanceLightYears: 384400 / LIGHT_YEAR_IN_KM,
				description: "å¹³å‡è·é›¢",
				icon: "ğŸŒ™",
				timeLightSpeed: "1.3ç§’",
				lifeEventComparison: "æ·±å‘¼å¸ ç´„1å›åˆ†",
				categoryClass: "category-earth"
			},
			{
				id: 4,
				name: "åœ°çƒ-å¤ªé™½",
				category: "å¤ªé™½ç³»",
				distanceKm: 149600000,
				distanceLightYears: 149600000 / LIGHT_YEAR_IN_KM,
				description: "1å¤©æ–‡å˜ä½(AU)",
				icon: "â˜€ï¸",
				timeLightSpeed: "8.3åˆ†",
				lifeEventComparison: "é€šå‹¤æ™‚é–“ ç´„1å›åˆ†",
				categoryClass: "category-solar"
			},
			{
				id: 5,
				name: "åœ°çƒ-ç«æ˜Ÿ(æœ€æ¥è¿‘)",
				category: "å¤ªé™½ç³»",
				distanceKm: 54600000,
				distanceLightYears: 54600000 / LIGHT_YEAR_IN_KM,
				description: "æœ€ã‚‚è¿‘ã„æ™‚",
				icon: "ğŸ”´",
				timeLightSpeed: "3åˆ†",
				lifeEventComparison: "ã‚«ãƒƒãƒ—éººã®å¾…ã¡æ™‚é–“",
				categoryClass: "category-solar"
			},
			{
				id: 6,
				name: "åœ°çƒ-æœ¨æ˜Ÿ",
				category: "å¤ªé™½ç³»",
				distanceKm: 628730000,
				distanceLightYears: 628730000 / LIGHT_YEAR_IN_KM,
				description: "å¤ªé™½ç³»æœ€å¤§ã®æƒ‘æ˜Ÿ",
				icon: "ğŸª",
				timeLightSpeed: "35åˆ†",
				lifeEventComparison: "ãƒ©ãƒ³ãƒã‚¿ã‚¤ãƒ  ç´„1å›åˆ†",
				categoryClass: "category-solar"
			},
			{
				id: 7,
				name: "åœ°çƒ-æµ·ç‹æ˜Ÿ",
				category: "å¤ªé™½ç³»",
				distanceKm: 4351400000,
				distanceLightYears: 4351400000 / LIGHT_YEAR_IN_KM,
				description: "å¤ªé™½ç³»æœ€ã‚‚é ã„æƒ‘æ˜Ÿ",
				icon: "ğŸ”µ",
				timeLightSpeed: "4æ™‚é–“",
				lifeEventComparison: "æ˜ ç”»é‘‘è³ ç´„2æœ¬åˆ†",
				categoryClass: "category-solar"
			},
			{
				id: 8,
				name: "å¤ªé™½ç³»ã®ç›´å¾„",
				category: "å¤ªé™½ç³»",
				distanceKm: 1.2e13,
				distanceLightYears: 1.2e13 / LIGHT_YEAR_IN_KM,
				description: "ã‚ªãƒ¼ãƒ«ãƒˆã®é›²ã¾ã§",
				icon: "â­•",
				timeLightSpeed: "ç´„13æ™‚é–“",
				lifeEventComparison: "ç¡çœ æ™‚é–“ ç´„2æ™©åˆ†",
				categoryClass: "category-solar"
			},
			{
				id: 9,
				name: "å¤ªé™½-ãƒ—ãƒ­ã‚­ã‚·ãƒãƒ»ã‚±ãƒ³ã‚¿ã‚¦ãƒª",
				category: "æ’æ˜Ÿé–“",
				distanceKm: 4.01e13,
				distanceLightYears: 4.24,
				description: "æœ€ã‚‚è¿‘ã„æ’æ˜Ÿ",
				icon: "â­",
				timeLightSpeed: "4.24å¹´",
				lifeEventComparison: "å¤§å­¦ç”Ÿæ´» ç´„1å›åˆ†",
				categoryClass: "category-star"
			},
			{
				id: 10,
				name: "å¤ªé™½-ã‚·ãƒªã‚¦ã‚¹",
				category: "æ’æ˜Ÿé–“",
				distanceKm: 8.14e13,
				distanceLightYears: 8.6,
				description: "æœ€ã‚‚æ˜ã‚‹ãè¦‹ãˆã‚‹æ’æ˜Ÿ",
				icon: "âœ¨",
				timeLightSpeed: "8.6å¹´",
				lifeEventComparison: "å°å­¦æ ¡ä½å­¦å¹´ ç´„3å¹´é–“",
				categoryClass: "category-star"
			},
			{
				id: 11,
				name: "å¤ªé™½-ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹",
				category: "æ’æ˜Ÿé–“",
				distanceKm: 6.43e15,
				distanceLightYears: 680,
				description: "ã‚ªãƒªã‚ªãƒ³åº§ã®èµ¤è‰²è¶…å·¨æ˜Ÿ",
				icon: "ğŸ”´",
				timeLightSpeed: "680å¹´",
				lifeEventComparison: "äººç”Ÿ ç´„10å›åˆ†",
				categoryClass: "category-star"
			},
			{
				id: 12,
				name: "éŠ€æ²³ç³»ã®ç›´å¾„",
				category: "éŠ€æ²³ç³»",
				distanceKm: 9.46e17,
				distanceLightYears: 100000,
				description: "å¤©ã®å·éŠ€æ²³å…¨ä½“",
				icon: "ğŸŒŒ",
				timeLightSpeed: "10ä¸‡å¹´",
				lifeEventComparison: "äººé¡ã®æ­´å² ç´„5å›åˆ†",
				categoryClass: "category-galaxy"
			},
			{
				id: 13,
				name: "éŠ€æ²³ç³»ä¸­å¿ƒã¾ã§",
				category: "éŠ€æ²³ç³»",
				distanceKm: 2.53e17,
				distanceLightYears: 26700,
				description: "å¤ªé™½ç³»ã‹ã‚‰éŠ€æ²³ä¸­å¿ƒ",
				icon: "âš«",
				timeLightSpeed: "2.67ä¸‡å¹´",
				lifeEventComparison: "è¾²è€•æ–‡æ˜ã®æ­´å² ç´„2å›åˆ†",
				categoryClass: "category-galaxy"
			},
			{
				id: 14,
				name: "ã‚¢ãƒ³ãƒ‰ãƒ­ãƒ¡ãƒ€éŠ€æ²³ã¾ã§",
				category: "éŠ€æ²³ç³»å¤–",
				distanceKm: 2.37e19,
				distanceLightYears: 2500000,
				description: "æœ€ã‚‚è¿‘ã„å¤§å‹éŠ€æ²³",
				icon: "ğŸŒ€",
				timeLightSpeed: "250ä¸‡å¹´",
				lifeEventComparison: "äººé¡èª•ç”Ÿã‹ã‚‰ã®å…¨æ­´å²",
				categoryClass: "category-beyond"
			},
			{
				id: 15,
				name: "è¦³æ¸¬å¯èƒ½ãªå®‡å®™ã®ç›´å¾„",
				category: "éŠ€æ²³ç³»å¤–",
				distanceKm: 8.8e23,
				distanceLightYears: 93000000000,
				description: "äººé¡ãŒè¦³æ¸¬ã§ãã‚‹é™ç•Œ",
				icon: "â™¾ï¸",
				timeLightSpeed: "930å„„å¹´",
				lifeEventComparison: "å®‡å®™èª•ç”Ÿã‹ã‚‰ã®æ™‚é–“ã®6å€ä»¥ä¸Š",
				categoryClass: "category-beyond"
			}
		];

		// ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
		let currentMode = 'km';
		let customMultiplier = 1;
		let chartInstance = null;

		// åˆæœŸåŒ–
		document.addEventListener('DOMContentLoaded', function () {
			updateAllDisplays();
			createChart();
			populateTable();
		});

		// ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
		function switchMode(mode) {
			currentMode = mode;

			// ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆ
			document.querySelectorAll('.mode-btn').forEach(btn => {
				btn.classList.remove('active');
			});
			document.querySelector(`[data-mode="${mode}"]`).classList.add('active');

			// ãƒ¬ãƒ¼ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
			updateRateDisplay();

			// ã™ã¹ã¦ã®è¡¨ç¤ºã‚’æ›´æ–°
			updateAllDisplays();
		}

		// ãƒ¬ãƒ¼ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
		function updateRateDisplay() {
			const rateText = currentMode === 'km'
				? '1km = 1å††'
				: '1å…‰å¹´ = 1å††';
			document.getElementById('currentRateText').textContent = rateText;
		}

		// è·é›¢ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆæŒ‡æ•°è¡¨è¨˜ãªã—ï¼‰
		function formatDistance(distance, unit) {
			if (unit === 'km') {
				const kmUnits = [
					{ value: 1e16, name: 'äº¬' },
					{ value: 1e12, name: 'å…†' },
					{ value: 1e8, name: 'å„„' },
					{ value: 1e4, name: 'ä¸‡' }
				];

				for (const u of kmUnits) {
					if (distance >= u.value) {
						return (distance / u.value).toFixed(2) + u.name + 'km';
					}
				}
				return Math.round(distance).toLocaleString('ja-JP') + 'km';
			} else {
				const lyUnits = [
					{ value: 1e8, name: 'å„„' },
					{ value: 1e4, name: 'ä¸‡' }
				];

				for (const u of lyUnits) {
					if (distance >= u.value) {
						return (distance / u.value).toFixed(2) + u.name + 'å…‰å¹´';
					}
				}
				return distance.toFixed(6) + 'å…‰å¹´';
			}
		}

		// é‡‘é¡ã«æ›ç®—
		function convertToMoney(spaceObject) {
			if (currentMode === 'km') {
				return spaceObject.distanceKm * customMultiplier;
			} else {
				return spaceObject.distanceLightYears * customMultiplier;
			}
		}

		// é‡‘é¡ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
		function formatMoney(amount) {
			if (amount < 0.01) {
				return '0.01å††æœªæº€';
			}

			const units = [
				{ value: 1e32, name: 'æº' },
				{ value: 1e28, name: 'ç©£' },
				{ value: 1e24, name: 'ç§­' },
				{ value: 1e20, name: 'å“' },
				{ value: 1e16, name: 'äº¬' },
				{ value: 1e12, name: 'å…†' },
				{ value: 1e8, name: 'å„„' },
				{ value: 1e4, name: 'ä¸‡' }
			];

			for (const unit of units) {
				if (amount >= unit.value) {
					return (amount / unit.value).toFixed(2) + unit.name + 'å††';
				}
			}

			return Math.round(amount).toLocaleString('ja-JP') + 'å††';
		}

		// é‡‘é¡ã‚’ãƒ¢ãƒã®æ•°ã«æ›ç®—
		function formatMoneyAsObjects(amount) {
			if (amount < 0.01) {
				return 'è¨ˆæ¸¬ä¸å¯';
			}

			// 110å…†å††ä»¥ä¸Š: å›½å®¶äºˆç®—
			if (amount >= PRICE_REFERENCES.japanBudget) {
				const years = (amount / PRICE_REFERENCES.japanBudget).toFixed(2);
				return `å›½å®¶äºˆç®— ${years}å¹´åˆ†`;
			}
			// 1000å„„ï½110å…†å††: æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼
			if (amount >= PRICE_REFERENCES.tokyoSkytree) {
				const count = Math.round(amount / PRICE_REFERENCES.tokyoSkytree);
				return `æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼ ${count.toLocaleString('ja-JP')}æœ¬åˆ†`;
			}
			// 5å„„ï½1000å„„å††: é«˜ç´šãƒãƒ³ã‚·ãƒ§ãƒ³
			if (amount >= PRICE_REFERENCES.luxuryMansion) {
				const count = Math.round(amount / PRICE_REFERENCES.luxuryMansion);
				return `é«˜ç´šãƒãƒ³ã‚·ãƒ§ãƒ³ ${count.toLocaleString('ja-JP')}è»’åˆ†`;
			}
			// 15ä¸‡ï½5å„„å††: iPhoneã¾ãŸã¯è»½è‡ªå‹•è»Š
			if (amount >= PRICE_REFERENCES.iphone) {
				if (amount >= PRICE_REFERENCES.keyCar * 2) {
					const count = Math.round(amount / PRICE_REFERENCES.keyCar);
					return `è»½è‡ªå‹•è»Š ${count.toLocaleString('ja-JP')}å°åˆ†`;
				} else {
					const count = Math.round(amount / PRICE_REFERENCES.iphone);
					return `iPhone ${count.toLocaleString('ja-JP')}å°åˆ†`;
				}
			}
			// 15ä¸‡å††æœªæº€: ç¼¶ã‚¸ãƒ¥ãƒ¼ã‚¹
			if (amount >= PRICE_REFERENCES.canJuice) {
				const count = Math.round(amount / PRICE_REFERENCES.canJuice);
				return `ç¼¶ã‚¸ãƒ¥ãƒ¼ã‚¹ ${count.toLocaleString('ja-JP')}æœ¬åˆ†`;
			}

			// 150å††æœªæº€
			return formatMoney(amount);
		}

		// ã‚°ãƒ©ãƒ•ã‚’ä½œæˆ
		function createChart() {
			const ctx = document.getElementById('distanceChart').getContext('2d');

			const data = spaceDistances.map(obj => ({
				name: obj.name,
				amount: convertToMoney(obj),
				category: obj.category
			}));

			const colors = {
				'åœ°çƒå‘¨è¾º': '#4a90e2',
				'å¤ªé™½ç³»': '#f39c12',
				'æ’æ˜Ÿé–“': '#9b59b6',
				'éŠ€æ²³ç³»': '#e91e63',
				'éŠ€æ²³ç³»å¤–': '#673ab7'
			};

			chartInstance = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: data.map(d => d.name),
					datasets: [{
						label: 'é‡‘é¡ï¼ˆå††ï¼‰',
						data: data.map(d => d.amount),
						backgroundColor: data.map(d => colors[d.category]),
						borderColor: data.map(d => colors[d.category]),
						borderWidth: 2
					}]
				},
				options: {
					indexAxis: 'y',
					responsive: true,
					maintainAspectRatio: false,
					plugins: {
						legend: {
							display: false
						},
						tooltip: {
							callbacks: {
								label: function (context) {
									return formatMoney(context.parsed.x);
								}
							}
						}
					},
					scales: {
						x: {
							type: 'logarithmic',
							ticks: {
								color: '#8899bb',
								callback: function (value) {
									return formatMoney(value);
								}
							},
							grid: {
								color: 'rgba(255, 255, 255, 0.1)'
							}
						},
						y: {
							ticks: {
								color: '#8899bb'
							},
							grid: {
								color: 'rgba(255, 255, 255, 0.1)'
							}
						}
					}
				}
			});
		}

		// ã‚°ãƒ©ãƒ•ã‚’æ›´æ–°
		function updateChart() {
			if (!chartInstance) return;

			const data = spaceDistances.map(obj => convertToMoney(obj));
			chartInstance.data.datasets[0].data = data;
			chartInstance.update('active');
		}

		// ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç”Ÿæˆ
		function populateTable() {
			updateTable();
		}

		// ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ›´æ–°
		function updateTable() {
			const tbody = document.getElementById('tableBody');

			tbody.innerHTML = spaceDistances.map(obj => {
				const amount = convertToMoney(obj);
				const distance = currentMode === 'km'
					? formatDistance(obj.distanceKm, 'km')
					: formatDistance(obj.distanceLightYears, 'ly');

				return `
                    <tr>
                        <td><span class="category-badge ${obj.categoryClass}">${obj.category}</span></td>
                        <td>${obj.icon} ${obj.name}</td>
                        <td>${distance}</td>
                        <td><strong>${formatMoney(amount)}</strong></td>
                        <td>${formatMoneyAsObjects(amount)}</td>
                        <td>${obj.timeLightSpeed}</td>
                        <td>${obj.lifeEventComparison}</td>
                    </tr>
                `;
			}).join('');
		}

		// ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚½ãƒ¼ãƒˆ
		let sortColumn = -1;
		let sortAsc = true;

		function sortTable(columnIndex) {
			const table = document.getElementById('dataTable');
			const tbody = table.querySelector('tbody');
			const rows = Array.from(tbody.querySelectorAll('tr'));

			if (sortColumn === columnIndex) {
				sortAsc = !sortAsc;
			} else {
				sortColumn = columnIndex;
				sortAsc = true;
			}

			rows.sort((a, b) => {
				const aVal = a.cells[columnIndex].textContent.trim();
				const bVal = b.cells[columnIndex].textContent.trim();

				if (columnIndex === 3) { // é‡‘é¡åˆ—
					const aNum = convertToMoney(spaceDistances[rows.indexOf(a)]);
					const bNum = convertToMoney(spaceDistances[rows.indexOf(b)]);
					return sortAsc ? aNum - bNum : bNum - aNum;
				}

				return sortAsc
					? aVal.localeCompare(bVal, 'ja')
					: bVal.localeCompare(aVal, 'ja');
			});

			tbody.innerHTML = '';
			rows.forEach(row => tbody.appendChild(row));
		}

		// ã™ã¹ã¦ã®è¡¨ç¤ºã‚’æ›´æ–°
		function updateAllDisplays() {
			updateChart();
			updateTable();
		}

		// ãƒ‡ãƒã‚¦ãƒ³ã‚¹é–¢æ•°
		function debounce(func, wait) {
			let timeout;
			return function executedFunction(...args) {
				const later = () => {
					clearTimeout(timeout);
					func(...args);
				};
				clearTimeout(timeout);
				timeout = setTimeout(later, wait);
			};
		}
	</script>
</body>

</html>